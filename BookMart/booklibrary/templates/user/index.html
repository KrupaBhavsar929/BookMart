<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Book Mart</title>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/icon" href="{% static 'user/assets/images/favicon.ico'%}"/>
    <!-- Font Awesome -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="{% static 'user/assets/css/bootstrap.min.css'%}" rel="stylesheet">
    <!-- Slick slider -->
    <link href="{% static 'user/assets/css/slick.css'%}" rel="stylesheet">
    <!-- Theme color -->
    <link id="switcher" href="{% static 'user/assets/css/theme-color/default-theme.css'%}" rel="stylesheet">

    <!-- Main Style -->
    <link href="{%static 'user/style.css'%}" rel="stylesheet">

    <!-- Fonts -->

    <!-- Open Sans for body font -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700,800" rel="stylesheet">
    <!-- Lato for Title -->
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>


<!-- Start Header -->
<header id="mu-header" class="" role="banner">
    <div class="container">
        <nav class="navbar navbar-default mu-navbar">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                            data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <!-- Text Logo -->
                    <a class="navbar-brand" href="/#"><i class="fa fa-book" aria-hidden="true"></i> Book Mart</a>


                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav mu-menu navbar-right">
                        <li><a href='#'>HOME</a></li>
                        <li><a href="#mu-book-overview">OVERVIEW</a></li>
                        <li><a href="#mu-contact">CONTACT</a></li>
                        {% if status %}
                        <li><a href="/myorder">MY ORDER</a></li>
                        <li><a href="/logout">LOGOUT</a></li>
                        {% else %}
                        <li><a href="/login">LOGIN</a></li>
                        {% endif %}
                        <!-- Add Cart Menu with Icon and Count -->
                        <li id="cart-menu" style="position: relative;">
                            <a href="/cart"> CART
                                <i class="fa fa-shopping-cart"></i>
                                <span id="cart-count-badge" class="badge"
                                      style="position: absolute; top: -8px; right: -8px; background-color: red; color: white; border-radius: 50%; padding: 4px 6px; font-size: 8px;">{{ request.session.total }}</span>

                            </a>
                        </li>
                    </ul>
                </div><!-- /.navbar-collapse -->

                </ul>
            </div><!-- /.navbar-collapse -->

    </div><!-- /.container-fluid -->
    </nav>
    </div>
</header>
<!-- End Header -->

<!-- Start Featured Slider -->

<section id="mu-hero">
    <div class="container">
        <div class="row">

            <div class="col-md-6 col-sm-6 col-sm-push-6">
                <div class="mu-hero-right">
                    <img src="{% static 'logo.jpg'%}" alt="Ebook img">
                </div>
            </div>

            <div class="col-md-6 col-sm-6 col-sm-pull-6">
                <div class="mu-hero-left">
                    <h1>Welcome to Book Mart - Your Gateway to a World of Stories!</h1>
                    <p style="font-size: 20px;">Imagine yourself in new worlds with every book you read. Let the words take you on exciting journeys full of fun, learning, and imagination.</p>

                </div>
            </div>

        </div>
    </div>
</section>

<!-- Start Featured Slider -->

<!-- Start main content -->
<!-- Start Additional Card Section -->
<section id="mu-additional-card" style="padding: 50px 0;">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="mu-additional-card-area" style="text-align: center;">
                    <div class="mu-heading-area">
                        <h2 class="mu-heading-title">Book List</h2>
                        <span class="mu-header-dot"></span>
                        <!-- Add any additional description here if needed -->
                    </div>

                    <!-- Start Additional Card Content -->
                    <div class="mu-additional-card-content" style="margin-top: 30px;">
                        <div class="row">
                            {% for i in data %}
                            <div class="col-md-3 mb-4"> <!-- Adjust column size to fit four cards per row -->
                                <!-- Card -->
                                <div class="card"
                                     style="position: relative; overflow: hidden; border-radius: 15px; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1); height:550px ; width:260px" >
                                    <img src="{{ i.image.url }}" class="card-bg" alt="Book Image"
                                         style="width: 200px; height: 300px; object-fit: cover; border-radius: 15px 15px 0 0;">
                                    <div class="card-content" style="padding: 20px; background-color: #fff; height:100px width:100px">
                                        <h5 class="card-title"
                                            style="font-size: 20px; font-weight: bold; margin-bottom: 10px; border-bottom: 2px solid #000;">
                                            {{ i.name }}</h5>
                                        {%load custom_tags%}
                                        {%half_contet i.detail as half_data%}
                                        <p class="card-text"
                                           style="font-size: 16px; margin-bottom: 20px; text-align: justify;">
                                            {{half_data}}</p>
                                        <p class="card-price" style="font-size: 18px; font-weight: bold;">
                                            â‚¹{{i.price}}</p>
                                        <div style="display: flex; justify-content: center;">
                                            <form method="post" id="add-to-cart-form" action="add_to_cart/{{i.id}}">
                                                {%csrf_token%}
                                                <button type="submit" id="buy-now-btn" class="btn btn-primary"
                                                        style="background-color: #007bff; color: #fff; border: none; padding: 10px 20px; border-radius: 5px; text-decoration: none; transition: background-color 0.3s ease; margin-right: 10px;">
                                                    ADD to CART
                                                </button>
                                            </form>
                                            <a href='bookd/{{i.id}}' class="btn btn-primary"
                                               style="background-color: #007bff; color: #fff; border: none; padding: 10px 20px; border-radius: 5px; text-decoration: none; transition: background-color 0.3s ease; margin-left: 10px;">
                                                View Detail
                                            </a>
                                        </div>


                                    </div>
                                </div>
                                <!-- End Card -->
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <!-- End Additional Card Content -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- End Additional Card Section -->

    <!-- Start Book Overview -->
    <section id="mu-book-overview">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="mu-book-overview-area">

                        <div class="mu-heading-area">
                            <h2 class="mu-heading-title">Book Facts</h2>
                            <span class="mu-header-dot"></span>

                        </div>

                        <!-- Start Book Overview Content -->
                        <div class="mu-book-overview-content">
                            <div class="row">

                                <!-- Book Overview Single Content -->
                                <div class="col-md-3 col-sm-6">
                                    <div class="mu-book-overview-single">
											<span class="mu-book-overview-icon-box">
												<i class="fa fa-area-chart" aria-hidden="true"></i>
											</span>
                                        <h4>The Guinness World Record for the Largest Book</h4>
                                        <p>The world's largest book was created in 2012 in Hungary. It measures 4.18m x 3.77m (13ft 8.58in x 12ft 4.74in) when closed and 7.87m x 5.45m (25ft 10.18in x 17ft 10.68in) when open.</p>
                                    </div>
                                </div>
                                <!-- / Book Overview Single Content -->

                                <!-- About Us Single Content -->
                                <div class="col-md-3 col-sm-6">
                                    <div class="mu-book-overview-single">
											<span class="mu-book-overview-icon-box">
												<i class="fa fa-cubes" aria-hidden="true"></i>
											</span>
                                        <h4>The Oldest Surviving Book</h4>
                                        <p>The oldest surviving book is the "Etruscan Gold Book," discovered in Bulgaria. Dating back to the 5th or 6th century AD, it contains six pages of 24-carat gold with illustrations and text.</p>
                                    </div>
                                </div>
                                <!-- / Book Overview Single Content -->

                                <!-- About Us Single Content -->
                                <div class="col-md-3 col-sm-6">
                                    <div class="mu-book-overview-single">
											<span class="mu-book-overview-icon-box">
												<i class="fa fa-modx" aria-hidden="true"></i>
											</span>
                                        <h4>The Longest Novel Ever Written</h4>
                                        <p>The longest novel ever published is "In Search of Lost Time" (Ã€ la recherche du temps perdu) by Marcel Proust. It consists of seven volumes and approximately 1.2 million words.</p>
                                    </div>
                                </div>
                                <!-- / Book Overview Single Content -->

<!--                                 About Us Single Content-->
                                <div class="col-md-3 col-sm-6">
                                    <div class="mu-book-overview-single">
											<span class="mu-book-overview-icon-box">
												<i class="fa fa-files-o" aria-hidden="true"></i>
											</span>
                                        <h4>The Most Translated Book</h4>
                                        <p>The Bible holds the record for being the most translated book in the world. It has been translated into over 3,000 languages and dialects.</p>
                                    </div>
                                </div>
                                <!-- / Book Overview Single Content -->

                            </div>
                        </div>
                        <!-- End Book Overview Content -->

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End Book Overview -->


    <!-- Start Video Review -->
    <section id="mu-video-review">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="mu-video-review-area">

                        <div class="mu-heading-area">
                            <h2 class="mu-heading-title">Check Out Our Video Review</h2>
                            <span class="mu-header-dot"></span>
                            <p>Looking for something exciting to watch? Our video review is packed with amazing content that'll keep you hooked. </p>
                        </div>

                        <!-- Start Video Review Content -->
                        <div class="mu-video-review-content">
                            <iframe class="mu-video-iframe" width="100%" height="480"
                                    src="https://www.youtube.com/embed/T4ySAlBt2Ug" frameborder="0"
                                    allowfullscreen></iframe>
                        </div>
                        <!-- End Video Review Content -->

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End Video Review -->

    <!-- Start Contact -->
    <section id="mu-contact">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="mu-contact-area">

                        <div class="mu-heading-area">
                            <h2 class="mu-heading-title">Drop Us A Message</h2>
                            <span class="mu-header-dot"></span>
                            <p>We're here to listen and assist you on your journey with Book Mart!</p>
                        </div>

                        <!-- Start Contact Content -->
                        <div class="mu-contact-content">

                            <div id="form-messages"></div>
                            <form method="post" action="/contactus">
                                {%csrf_token%}
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="name" id="name" name="name"
                                           required>
                                </div>
                                <div class="form-group">
                                    <input type="email" class="form-control" placeholder="Enter Email" id="email"
                                           name="email" required>
                                </div>
                                <div class="form-group">
                                    <textarea class="form-control" placeholder="Message" id="message" name="msg"
                                              required></textarea>
                                </div>
                                <button type="submit" class="mu-send-msg-btn"><span>SUBMIT</span></button>
                            </form>

                        </div>
                        <!-- End Contact Content -->

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End Contact -->

</main>

<!-- End main content -->

<!-- Start footer -->
<footer id="mu-footer" role="contentinfo">
    <div class="container">
        <div class="mu-footer-area">
            <div class="mu-social-media">
                <a href="#"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-google-plus"></i></a>
                <a href="#"><i class="fa fa-linkedin"></i></a>
            </div>

        </div>
    </div>

</footer>
<!-- End footer -->


<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<!-- Bootstrap -->
<script src="{% static 'user/assets/js/bootstrap.min.js'%}"></script>
<!-- Slick slider -->
<script type="text/javascript" src="{% static 'user/assets/js/slick.min.js'%}"></script>
<!-- Counter js -->
<script type="text/javascript" src="{% static 'user/assets/js/counter.js'%}"></script>
<!-- Ajax contact form  -->
<script type="text/javascript" src="{% static 'user/assets/js/app.js'%}"></script>


<!-- Custom js -->
<script type="text/javascript" src="{% static 'user/assets/js/custom.js'%}"></script>


</body>
</html>
<script>

   document.getElementById("buy-now-btn").addEventListener("click", function() {
        // Check user login status via AJAX when the button is clicked
        fetch('/check_login_status/') // URL to your view for checking login status
        .then(response => response.json())
        .then(data => {
            if (data.is_logged_in) {
                // If user is logged in, redirect to the cart page
                window.location.href = '/bookd';
            } else {
                // If user is not logged in, show an alert and redirect to login page
                alert('Please login first.');
                window.location.href = '/login';
            }
        })
        .catch(error => console.error('Error:', error));
    });


function loginAlert() {
    // Show alert dialog
    alert("Please login first!");

    // Redirect to login page
            window.location.href = "/login";
}

 document.addEventListener("DOMContentLoaded", function() {
        document.getElementById("add-to-cart-form").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent default form submission

            fetch(this.action, {
                method: this.method,
                body: new FormData(this),
                headers: {
                    'X-CSRFToken': "{{ csrf_token }}"
                }
            })
            .then(response => response.json())
            .then(data => {
                // Update the cart count badge
                document.getElementById("cart-count-badge").innerText = data.total_items;
            })
            .catch(error => console.error('Error:', error));
        });
    });

</script>
